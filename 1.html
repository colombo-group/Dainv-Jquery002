<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Jquery002</title>
	<link rel="stylesheet" href="1.css">

	
	 <script type="text/javascript" src="jquery.js"></script>
</head>
<body>
		<div class="khoito">
			<div class="anhslide">
				<div class="_1slide active"><img class="a" src="images/1.jpg" alt=""></div>
				<div class="_1slide"><img   src="images/2.jpg" alt=""></div>
				<div class="_1slide"><img  src="images/3.jpg" alt=""></div>
				<div class="_1slide"><img   src="images/4.jpg" alt=""></div>
			</div>
			<div class="nutslide">
				<div class="next"><img   class="preview" src="images/phai.jpg" alt=""></div>
				<div class="prev"><img   class="preview1" src="images/trai.jpg" alt=""></div>
				<div class="tooltipnext"></div>
				<div class="tooltipprev"></div>
				
			</div>
			<div class="nut">
				<ul>
					<li class="chon"> 1</li>
					<li> 2</li>
					<li> 3</li>
					<li> 4</li>
				</ul>
			</div>

		</div>
<script type="text/javascript">
$(document).ready(function() {
		time=setInterval(function(){
			$('.next').trigger('click')
		},3000)

		$('.next').click(function(event) {
			clearInterval(time);
		var sau=$('.active').next();
		
		vitri=$('.chon').index()+1;
		 
		$('.chon').removeClass('chon');
		if(vitri==$('.nut ul li').length)
		{
			vitri=0;
		}
		$('.nut ul li:nth-child('+(vitri+1)+')').addClass('chon');
		if(sau.length==0)
		{
			$('.active').addClass('goLeft').one('webkitAnimationEnd', function(event) {
			$('.goLeft').removeClass('goLeft');
		});
			$('.anhslide ._1slide:first').addClass('goTheRight').one('webkitAnimationEnd', function(event) {
			$('.active').removeClass('active');
			$('.goTheRight').addClass('active').removeClass('goTheRight')
		});
		}
		else{
		$('.active').addClass('goLeft').one('webkitAnimationEnd', function(event) {
			$('.goLeft').removeClass('goLeft');
		});
			
			$(".preview").hover(function() {
	 	var image=$('.active img').attr('src');
	 	
	 	$('.tooltipnext').append("<img src='"+ image +"'  />");
	 	 $('.tooltipnext').css('opacity','1');
	 	
	
	 }, function() {
	 		 $(".tooltipnext").css('opacity','0');
	 		
	 });
		sau.addClass('goTheRight').one('webkitAnimationEnd', function(event) {
			$('.active').removeClass('active');
			$('.goTheRight').addClass('active').removeClass('goTheRight');
			
		});
	} 
 
	 
	});
	$('.prev').click(function(event) {
		/* Act on the event */
		clearInterval(time);
		var truoc= $('.active').prev()
		// console.log(truoc.length);
		vitri=$('.chon').index()+1
		$('.chon').removeClass('chon');
		// console.log($('.nut ul li').length+1);
		if(vitri==1)
		{
			vitri=$('.nut ul li').length+1;
		}
		$('.nut ul li:nth-child('+(vitri-1)+')').addClass('chon');
		if(truoc.length==0)
		{
			$('.active').addClass('goRight').one('webkitAnimationEnd', function(event) {
			$('.goRight').removeClass('goRight');
			});	
			$('.anhslide ._1slide:last').addClass('goTheLeft').one('webkitAnimationEnd', function(event) {
			$('.active').removeClass('active');
			$('.goTheLeft').addClass('active').removeClass('goTheLeft')
		});		
		}else{
		$('.active').addClass('goRight').one('webkitAnimationEnd', function(event) {
			$('.goRight').removeClass('goRight');
	});	
	truoc.addClass('goTheLeft').one('webkitAnimationEnd', function(event) {
			$('.active').removeClass('active');
			$('.goTheLeft').addClass('active').removeClass('goTheLeft')
		});
		}	
			$(".preview1").hover(function() {
	 		var image=$('.active img').attr('src');
	 	
	 	$('.tooltipprev').append("<img src='"+ image +"'  />");
	 	 $('.tooltipprev').css('opacity','1');
	 	
	
	 }, function() {
	 		 $(".tooltipprev").css('opacity','0');
	 		
	 });	
	});	
	$('.nut ul li').click(function(event) {
		$('.chon').removeClass('chon');
		$(this).addClass('chon');
		$('.active').addClass('goLeft').one('webkitAnimationEnd', function(event) {
			$('.goLeft').removeClass('goLeft');
			});
		var i=$('.chon').index()+1;
		$('.anhslide ._1slide:nth-child('+i+')').addClass('goTheRight').one('webkitAnimationEnd', function(event) {
			$('.active').removeClass('active');
			$('.goTheRight').addClass('active').removeClass('goTheRight')
	
			});
		
	});

 });
</script>
</body>
</html>